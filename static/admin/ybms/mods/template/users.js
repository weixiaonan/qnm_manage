layui.define(["larryms","forms","table","common"],function(e){var n=layui.$,s=layui.larryms,t=layui.forms,u=layui.common;table=layui.table;var a=n("#userMange").data("url");table.render({elem:"#userMange",url:a,method:"post",limit:15,even:true,page:true,page:true,toolbar:"#toolbar",height:"full-145",defaultToolbar:["filter","print","exports"],text:{none:"暂无相关数据"},cols:[[{type:"checkbox",fixed:"left",width:50},{type:"numbers",title:"编号",width:60},{field:"username",title:"用户名",width:100},{field:"realname",title:"姓名",width:120},{field:"name",title:"部门",width:100,align:"center"},{field:"zhiwei",title:"当前职位",align:"center"},{field:"phone",title:"手机号",align:"center"},{field:"status",title:"在岗状态",sort:true,width:100,templet:function(e){var t=e.status==1?"checked":"";return'<input type="checkbox" name="status" lay-filter="status" lay-skin="switch" lay-text="在岗|离岗" '+t+">"}},{field:"online_state",title:"当前状态",sort:true,width:100,align:"center",templet:function(e){if(e.online_state==1){return'<span class="larry-btn larry-btn-xs radius larry-btn-outline-primary">当前在线</span>'}else if(e.online_state==0){return'<span class="larry-btn larry-btn-xs radius larry-btn-outline-secondary">当前离线</span>'}else if(e.online_state==2){return'<span class="larry-btn larry-btn-xs radius larry-btn-outline-info">已锁屏幕</span>'}else if(e.online_state==3){return'<span class="larry-btn larry-btn-xs radius larry-btn-outline-danger">正在忙碌</span>'}}},{field:"login_num",title:"登录次数",sort:true,align:"center"},{field:"last_login_ip",title:"登录ip",align:"center"},{field:"last_login_time",title:"登录时间",sort:true,align:"center"},{title:"操作",width:150,templet:"#opreateBar",fixed:"right",align:"center"}]]});table.on("checkbox(userMange)",function(e){var t=table.checkStatus("userMange"),a=t.data;a.length>0?n(".isDelete").removeClass("disabled"):n(".isDelete").addClass("disabled");a.length>0?n(".isDelete").attr("disabled",false):n(".isDelete").attr("disabled",true);layui.layer.tips("选中了："+a.length+" 个",".isDelete",{tips:[1,"#393D49"]})});table.on("toolbar(userMange)",function(e){switch(e.event){case"add":var t=n(this).data("url");u.CreateAddForm("添加员工",t,{width:"600px",height:"600px"});break;case"del":var a=table.checkStatus("userMange"),r=a.data;var l=[];for(var i=0;i<r.length;i++){if(r[i].id==1){layer.msg("系统管理员不能删除!");return}l.push(r[i].id)}if(l.length==0){s.msg("请先选择待删除项",{icon:2});return false}s.msg("正在执行删除...",{icon:2,time:1e3},function(){s.msg("很抱歉这里只是前端演示数据逻辑执行，执行删除需要您请求服务端完成")});break;case"search":s.msg("搜索功能需请求服务端执行，此次只提供前端实现演示",{icon:1},function(){u.ReloadOrSearch("userMange",table)});break;case"reload":u.ReloadOrSearch("userMange",table);break}});table.on("tool(userMange)",function(e){var t=e.data;switch(e.event){case"edit":var a=n(this).data("url");u.CreateAddForm("编辑员工",a,{width:"600px",height:"600px"});break;case"del":if(t.id==1){layer.msg("系统管理员不能删除!");return}else{s.msg("您正在删除"+JSON.stringify(t)+"请结合服务端请求完成删除")}}});e("users",{})});